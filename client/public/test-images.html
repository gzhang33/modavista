<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .image-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 4px;
            border: 2px solid #ddd;
        }
        .image-info {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .success { color: #22c55e; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>分类图片测试页面</h1>
        <p>此页面用于测试分类轮播组件中的图片是否能正确显示</p>
        
        <div class="image-grid" id="imageGrid"></div>
        
        <div class="status" id="statusReport"></div>
    </div>

    <script>
        const categories = [
            { id: 'Tops', name: 'TOPS', image: '/images/categories/tops.jpg' },
            { id: 'Outerwear', name: 'OUTERWEAR', image: '/images/categories/outerwear.jpg' },
            { id: 'Bottoms', name: 'BOTTOMS', image: '/images/categories/bottoms.jpg' },
            { id: 'Dresses', name: 'DRESSES', image: '/images/categories/dresses.jpg' }
        ];

        const results = [];
        const imageGrid = document.getElementById('imageGrid');
        const statusReport = document.getElementById('statusReport');

        categories.forEach((category, index) => {
            const card = document.createElement('div');
            card.className = 'image-card';
            
            const img = document.createElement('img');
            img.src = category.image;
            img.alt = category.name;
            
            const info = document.createElement('div');
            info.className = 'image-info';
            info.innerHTML = `
                <strong>${category.name}</strong><br>
                路径: ${category.image}<br>
                状态: <span id="status-${index}">加载中...</span>
            `;
            
            img.onload = function() {
                const status = document.getElementById(`status-${index}`);
                status.innerHTML = '<span class="success">✓ 加载成功</span>';
                status.innerHTML += `<br>尺寸: ${this.naturalWidth}x${this.naturalHeight}`;
                results.push({ category: category.name, status: 'success', width: this.naturalWidth, height: this.naturalHeight });
                updateStatusReport();
            };
            
            img.onerror = function() {
                const status = document.getElementById(`status-${index}`);
                status.innerHTML = '<span class="error">✗ 加载失败</span>';
                results.push({ category: category.name, status: 'error' });
                updateStatusReport();
            };
            
            card.appendChild(img);
            card.appendChild(info);
            imageGrid.appendChild(card);
        });

        function updateStatusReport() {
            if (results.length === categories.length) {
                const successCount = results.filter(r => r.status === 'success').length;
                const errorCount = results.filter(r => r.status === 'error').length;
                
                let report = `<h3>测试报告</h3>`;
                report += `<p>总计: ${categories.length} 张图片</p>`;
                report += `<p class="success">成功: ${successCount} 张</p>`;
                report += `<p class="error">失败: ${errorCount} 张</p>`;
                
                if (successCount === categories.length) {
                    report += `<p class="success"><strong>✓ 所有图片都可以正常加载！</strong></p>`;
                } else {
                    report += `<p class="error"><strong>✗ 有图片加载失败，请检查文件路径</strong></p>`;
                }
                
                statusReport.innerHTML = report;
            }
        }

        // 页面加载完成后的额外检查
        window.addEventListener('load', function() {
            setTimeout(() => {
                console.log('页面完全加载，检查图片状态...');
                const images = document.querySelectorAll('img');
                images.forEach((img, index) => {
                    console.log(`图片 ${index + 1}:`, {
                        src: img.src,
                        complete: img.complete,
                        naturalWidth: img.naturalWidth,
                        naturalHeight: img.naturalHeight
                    });
                });
            }, 1000);
        });
    </script>
</body>
</html>